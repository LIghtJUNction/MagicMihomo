proxy-provider-templates:
  premium-http: &PREMIUM_HTTP_DEFAULTS
    type: http
    interval: 3600
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300
  free-http: &FREE_HTTP_DEFAULTS
    type: http
    interval: 3600
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 600
proxy-providers: # è¯·è‡ªè¡Œä¿®æ”¹ï¼
  premium_a:
    <<: *PREMIUM_HTTP_DEFAULTS
    path: ./proxies/A.yaml
    url: "https://raw.githubusercontent.com/Barabama/FreeNodes/main/nodes/clashmeta.yaml"
  premium_b:
    <<: *PREMIUM_HTTP_DEFAULTS
    path: ./proxies/B.yaml
    url: "https://raw.githubusercontent.com/Barabama/FreeNodes/main/nodes/yudou66.yaml"
  premium_c:
    <<: *PREMIUM_HTTP_DEFAULTS
    path: ./proxies/C.yaml
    url: "https://raw.githubusercontent.com/Barabama/FreeNodes/main/nodes/blues.yaml"
  free_a: # https://github.com/Barabama/FreeNodes
    <<: *FREE_HTTP_DEFAULTS
    path: ./proxies/a.yaml
    url: "https://raw.githubusercontent.com/Barabama/FreeNodes/main/nodes/nodefree.yaml"
  free_b:
    <<: *FREE_HTTP_DEFAULTS
    path: ./proxies/b.yaml
    url: "https://raw.githubusercontent.com/Barabama/FreeNodes/main/nodes/v2rayshare.yaml"
  free_c:
    <<: *FREE_HTTP_DEFAULTS
    path: ./proxies/c.yaml
    url: "https://raw.githubusercontent.com/Barabama/FreeNodes/main/nodes/wenode.yaml"
  free_d:
    <<: *FREE_HTTP_DEFAULTS
    path: ./proxies/d.yaml
    url: "https://raw.githubusercontent.com/Barabama/FreeNodes/main/nodes/nodev2ray.yaml"
  free_e:
    <<: *FREE_HTTP_DEFAULTS
    path: ./proxies/e.yaml
    url: "https://raw.githubusercontent.com/Barabama/FreeNodes/main/nodes/ndnode.yaml"
dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: true # å¼€å¯ IPv6 è§£æ
  use-hosts: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  # fake-ip-range-v6: fc00::/18 # å¦‚æœéœ€è¦ IPv6 Fake-IP å»ºè®®å–æ¶ˆæ­¤è¡Œæ³¨é‡Š
  cache-algorithm: arc
  prefer-h3: true
  default-nameserver: # ã€è§£å†³å¾ªç¯ä¾èµ–ã€‘å¿…é¡»åŒ…å« IPv4 å’Œ IPv6 çš„åŒæ ˆåŸºç¡€ DNS
    - 223.5.5.5
    - 2401:3200::1 # é˜¿é‡Œ IPv6 DNS
    - 1.1.1.1
    - 2606:4700:4700::1111 # Cloudflare IPv6 DNS
  nameserver: # ã€å…¨åŠ å¯†è§£æã€‘åŒæ—¶é…ç½®åŒæ ˆ DoH/DoT
    - 8.8.8.8 # Google (æ”¯æŒ H3)
    - 2001:4860:4860::8888
    - 1.1.1.1 # Cloudflare (æ”¯æŒ H3)
    - 2606:4700:4700::1111
    - quic://dns.adguard-dns.com # AdGuard (æ”¯æŒ DoQ, æé€Ÿå“åº”)
  nameserver-policy:
    # å›½å†…æ ¸å¿ƒåŸŸåï¼šä½¿ç”¨é˜¿é‡Œ/è…¾è®¯åŒæ ˆ DoH åŠ å¯†è§£æï¼Œç¡®ä¿ CDN åŠ é€Ÿ
    "geosite:cn,apple-cn,microsoft-cn,google-cn,games-cn,private":
      - 223.5.5.5
      - 2401:3200::1
      - doh.pub
    # ä»£ç†ä¸ AI ç±»ï¼šå¼ºåˆ¶èµ°æµ·å¤–é«˜æ€§èƒ½ DoH/DoQï¼Œé˜²æ­¢æ±¡æŸ“
    "geosite:proxy,ai,gfw,tld-proxy":
      - 8.8.8.8
      - 1.1.1.1
      - quic://dns.adguard-dns.com
    # å½±éŸ³åª’ä½“ä¸æ¸¸æˆï¼šä¼˜åŒ–å»¶è¿Ÿ
    "geosite:media,games":
      - dns.google
      - 1.1.1.1
    # ç½‘ç»œè¿é€šæ€§æµ‹è¯•ï¼šè¿”å›çœŸå®è§£æï¼Œé¿å…è¢«ä»£ç†æ‹¦æˆªå¯¼è‡´åˆ¤æ–­è¯¯æŠ¥
    "geosite:networktest":
      - 223.5.5.5
      - 119.29.29.29
    # å¹¿å‘Šä¸è¿½è¸ªå™¨ï¼šç›´æ¥ä¸¢å¼ƒæˆ–è¿”å› 127.0.0.1
    "geosite:ads,trackerslist":
      - rcode://refused
tun:
  enable: true
  stack: mixed # æ¨èä½¿ç”¨ mixed æˆ– gvisorï¼Œæ€§èƒ½ä¼˜äº system
  device: utun
  mtu: 1500 # æ ‡å‡†å€¼
  auto-route: true # è‡ªåŠ¨æ¥ç®¡ç³»ç»Ÿæµé‡
  auto-detect-interface: true # è‡ªåŠ¨é€‰æ‹©ä¸»å‡ºå£ç½‘å¡
  strict-route: true # å¼€å¯åå¯é˜²æ­¢æµé‡ç»•è¿‡ä»£ç†
  endpoint-independent-nat: true # å¼€å¯ç‹¬ç«‹äºç«¯ç‚¹çš„ NAT (é”¥å½¢ NAT)ï¼Œå¯¹æ¸¸æˆ/P2P éå¸¸å‹å¥½
  dns-hijack:
    - "any:53" # åŠ«æŒæ‰€æœ‰ IPv4 UDP/53 æµé‡
    - "tcp://any:53" # åŠ«æŒæ‰€æœ‰ IPv4 TCP/53 æµé‡
    - "[::]:53" # åŠ«æŒæ‰€æœ‰ IPv6 UDP/53 æµé‡
    - "tcp://[::]:53" # åŠ«æŒæ‰€æœ‰ IPv6 TCP/53 æµé‡
  inet4-route-exclude-address:
    - 192.168.0.0/16 # æ¨™æº–å±€åŸŸç¶²
    - 10.0.0.0/8 # ä¼æ¥­/å¤§ä¸­å‹å±€åŸŸç¶²
    - 172.16.0.0/12 # ä¸­å‹å±€åŸŸç¶²
    - 127.0.0.0/8 # æœ¬åœ°ç’°å›
    - 169.254.0.0/16 # éˆè·¯æœ¬åœ°åœ°å€ï¼ˆDHCPå¤±æ•—æ™‚ä½¿ç”¨ï¼‰
    - 224.0.0.0/4 # çµ„æ’­åœ°å€ï¼ˆå¤šç”¨æ–¼å±€åŸŸç¶²è¨­å‚™ç™¼ç¾/æŠ•å±ï¼‰
  inet6-route-exclude-address:
    - fc00::/7 # å”¯ä¸€æœ¬åœ°åœ°å€ (ULA) - ç›¸ç•¶æ–¼ IPv4 çš„ 192.168
    - fe80::/10 # éˆè·¯æœ¬åœ°åœ°å€ (Link-Local) - é—œéµï¼šç”¨æ–¼å±€åŸŸç¶²ç™¼ç¾å’Œè‡ªå‹•é…ç½®
    - ff00::/8 # çµ„æ’­åœ°å€ (Multicast) - ç”¨æ–¼ IPv6 çš„é„°å±…ç™¼ç¾ (NDP) å’ŒæŠ•å±
sniffer:
  enable: true
  parse-pure-ip: true # å»ºè®®å¼€å¯ï¼šå¤„ç†çº¯ IP æµé‡æ—¶å°è¯•è¿˜åŸåŸŸå
  force-dns-mapping: true # å»ºè®®å¼€å¯ï¼šé…åˆ fake-ip æé«˜åŸŸåè¿˜åŸå‡†ç¡®ç‡
  override-destination: true # å…¨å±€è¦†ç›–ç›®æ ‡åœ°å€
  sniff:
    TLS: # TLS å—…æ¢ (HTTPS)
      ports: [443, 8443, 2096, 2087] # æ‹“å±• Cloudflare å¸¸ç”¨ç«¯å£
    HTTP: # HTTP å—…æ¢
      ports: [80, 8080-8880]
      override-destination: true # HTTP å¼ºåˆ¶è¦†ç›–
    QUIC: # QUIC å—…æ¢ (é’ˆå¯¹ YouTube/Google ä¼˜åŒ–)
      ports: [443, 8443] # QUIC (HTTP/3) å—…æ¢ï¼Œé‡å° YouTube/Google æœ€ä½³åŒ–
  force-domain:
    - "+" # 2025 é ‚é…ï¼šå°æ‰€æœ‰å—…æ¢åˆ°çš„æµé‡åŸ·è¡Œé‚„åŸï¼Œç¢ºä¿è¦å‰‡åŒ¹é…æœ€æº–
    - "google.com" # ç¢ºä¿ Google ç›¸é—œæœå‹™ä¸èµ°ç´” IP
    - "netflix.com" # å½±è¦–é¡å¼·åˆ¶é‚„åŸï¼Œé˜²æ­¢ CDN é–å€å¤±æ•ˆ
  skip-domain:
    - "Mijia Cloud" # ç±³å®¶ç­‰ IoT è¨­å‚™ä½¿ç”¨ç§æœ‰å”è­°ï¼Œå—…æ¢æœƒæ–·é€£
    - "geosite:private" # ç§æœ‰ç¶²çµ¡ä¸å—…æ¢
    - "geosite:apple-cn" # Apple æœå‹™å° SNI ç¯¡æ”¹æ¥µå…¶æ•æ„Ÿï¼Œè·³éä»¥ä¿è­‰ç©©å®šæ€§
    - "geosite:microsoft-cn" # è§£æ±º Office365 ç™»éŒ„ç·©æ…¢
    - "+.push.apple.com" # è˜‹æœæ¨é€å°ˆç”¨
    - "+.apple.com"
    - "+.icloud.com"
    - "+.itunes.apple.com"
    - "Pairing" # è—ç‰™/éš”ç©ºæŠ•é€ç›¸é—œ
    - "Directory" # ç³»çµ±ç›®éŒ„æœå‹™
profile:
  store-selected: true
  store-fake-ip: true
ntp:
  enable: true
  write-to-system: false # é™¤éæ˜¯ä½œä¸ºè·¯ç”±å™¨å›ºä»¶è¿è¡Œï¼Œå¦åˆ™å»ºè®®ä¿æŒ false
  server: time.apple.com
  port: 123
  interval: 300 #é—´éš”è°ƒå¤§è‡³ 300s (5åˆ†é’Ÿ)ï¼Œå‡å°‘æ— æ„ä¹‰çš„è¯·æ±‚ï¼Œ30s å¤ªé¢‘ç¹äº†
  server-list:
    - time.apple.com
    - time.cloudflare.com
    - ntp.aliyun.com
    - pool.ntp.org
geox-url:
  geoip: https://github.com/DustinWin/ruleset_geodata/releases/download/clash/geoip-all.dat
  geosite: https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-geodata/geosite-all.dat
proxies: []
providers-default: # use: *ALL_PROVIDERS
  premium: &PREMIUM_PROVIDERS
    - premium_a # ä»˜è´¹è®¢é˜…é“¾æ¥a
    - premium_b # ä»˜è´¹è®¢é˜…é“¾æ¥b
    - premium_c # ä»˜è´¹è®¢é˜…é“¾æ¥c
  free: &FREE_PROVIDERS
    - free_a # å…è´¹è®¢é˜…é“¾æ¥a
    - free_b # å…è´¹è®¢é˜…é“¾æ¥b
    - free_c # å…è´¹è®¢é˜…é“¾æ¥c
    - free_d # å…è´¹è®¢é˜…é“¾æ¥d
    - free_e # å…è´¹è®¢é˜…é“¾æ¥e
  builtin: &BUILTIN_PROVIDERS
    - DIRECT
    - REJECT
  all_providers: &ALL_PROVIDERS
    - premium_a # ä»˜è´¹è®¢é˜…é“¾æ¥a
    - premium_b # ä»˜è´¹è®¢é˜…é“¾æ¥b
    - premium_c # ä»˜è´¹è®¢é˜…é“¾æ¥c
    - free_a # å…è´¹è®¢é˜…é“¾æ¥a
    - free_b # å…è´¹è®¢é˜…é“¾æ¥b
    - free_c # å…è´¹è®¢é˜…é“¾æ¥c
    - free_d # å…è´¹è®¢é˜…é“¾æ¥d
    - free_e # å…è´¹è®¢é˜…é“¾æ¥e
proxy-groups-defaults: # ä»£ç†ç»„é»˜è®¤å€¼
  proxies: &PROXIES
    - ğŸ‡ºğŸ‡² é€‰æ‹©ç¾å›½èŠ‚ç‚¹
    - ğŸ‡¯ğŸ‡µ é€‰æ‹©æ—¥æœ¬èŠ‚ç‚¹
    - ğŸ‡­ğŸ‡° é€‰æ‹©é¦™æ¸¯èŠ‚ç‚¹
    - ğŸ‡­ğŸ‡° é€‰æ‹©å°æ¹¾èŠ‚ç‚¹
    - ğŸ˜Š é€‰æ‹©å…¶ä»–å›½å®¶èŠ‚ç‚¹
    - DIRECT
    - REJECT
  # ä¸æ”¯æŒæ•°ç»„å±•å¼€åªèƒ½è¿™æ ·äº†
  proxies-more: &PROXIES-MORE
    - ğŸŒ å¿«é€Ÿé€‰æ‹©ä»£ç†
    - ğŸ‡ºğŸ‡² é€‰æ‹©ç¾å›½èŠ‚ç‚¹
    - ğŸ‡¯ğŸ‡µ é€‰æ‹©æ—¥æœ¬èŠ‚ç‚¹
    - ğŸ‡­ğŸ‡° é€‰æ‹©é¦™æ¸¯èŠ‚ç‚¹
    - ğŸ‡­ğŸ‡° é€‰æ‹©å°æ¹¾èŠ‚ç‚¹
    - ğŸ˜Š é€‰æ‹©å…¶ä»–å›½å®¶èŠ‚ç‚¹
    - DIRECT
    - REJECT
  proxies-direct-default: &PROXIES_DIRECT_DEFAULT
    - DIRECT
    - ğŸŒ å¿«é€Ÿé€‰æ‹©ä»£ç†
    - ğŸ‡ºğŸ‡² é€‰æ‹©ç¾å›½èŠ‚ç‚¹
    - ğŸ‡¯ğŸ‡µ é€‰æ‹©æ—¥æœ¬èŠ‚ç‚¹
    - ğŸ‡­ğŸ‡° é€‰æ‹©é¦™æ¸¯èŠ‚ç‚¹
    - ğŸ‡­ğŸ‡° é€‰æ‹©å°æ¹¾èŠ‚ç‚¹
    - ğŸ˜Š é€‰æ‹©å…¶ä»–å›½å®¶èŠ‚ç‚¹
    - REJECT
  proxies-reject-default: &PROXIES_REJECT_DEFAULT
    - REJECT
    - DIRECT
    - ğŸŒ å¿«é€Ÿé€‰æ‹©ä»£ç†
    - ğŸ‡ºğŸ‡² é€‰æ‹©ç¾å›½èŠ‚ç‚¹
    - ğŸ‡¯ğŸ‡µ é€‰æ‹©æ—¥æœ¬èŠ‚ç‚¹
    - ğŸ‡­ğŸ‡° é€‰æ‹©é¦™æ¸¯èŠ‚ç‚¹
    - ğŸ‡­ğŸ‡° é€‰æ‹©å°æ¹¾èŠ‚ç‚¹
    - ğŸ˜Š é€‰æ‹©å…¶ä»–å›½å®¶èŠ‚ç‚¹
  proxies-group-defaults: &PROXIES_GROUP_DEFAULTS
    type: select
    use: *ALL_PROVIDERS
    proxies: *PROXIES
  proxies-group-more: &PROXIES_GROUP_MORE
    <<: *PROXIES_GROUP_DEFAULTS
    proxies: *PROXIES-MORE
  proxies-group-more-direct: &PROXIES_GROUP_MORE_DIRECT
    <<: *PROXIES_GROUP_DEFAULTS
    proxies: *PROXIES_DIRECT_DEFAULT
  proxies-group-more-reject: &PROXIES_GROUP_MORE_REJECT
    <<: *PROXIES_GROUP_DEFAULTS
    proxies: *PROXIES_REJECT_DEFAULT
  proxies-group-urltest: &URLTEST_DEFAULTS
    type: url-test
    use: *ALL_PROVIDERS
    url: https://cp.cloudflare.com/generate_204
    interval: 300
    tolerance: 50
    lazy: true
  proxies-group-fallback: &FALLBACK_DEFAULTS
    type: fallback
    use: *ALL_PROVIDERS
    url: https://cp.cloudflare.com/generate_204
    interval: 300
proxy-groups:
  - name: ğŸŒ å¿«é€Ÿé€‰æ‹©ä»£ç†
    <<: *PROXIES_GROUP_DEFAULTS
  - name: ğŸ”° ç¯å¤§é™† # é»˜è®¤ï¼šğŸŒ å¿«é€Ÿé€‰æ‹©ä»£ç†
    <<: *PROXIES_GROUP_MORE
  - name: ğŸ¤– äººå·¥æ™ºèƒ½ # é»˜è®¤ï¼šğŸŒ å¿«é€Ÿé€‰æ‹©ä»£ç†
    <<: *PROXIES_GROUP_MORE
  - name: ğŸ“ˆ ç½‘ç»œæµ‹è¯• # é»˜è®¤ï¼šğŸŒ å¿«é€Ÿé€‰æ‹©ä»£ç†
    <<: *PROXIES_GROUP_MORE
  - name: ğŸ è‹¹æœæœåŠ¡ # é»˜è®¤ï¼šğŸŒ å¿«é€Ÿé€‰æ‹©ä»£ç†
    <<: *PROXIES_GROUP_MORE
  - name: ğŸ‡¬ è°·æ­ŒæœåŠ¡ # é»˜è®¤ï¼šğŸŒ å¿«é€Ÿé€‰æ‹©ä»£ç†
    <<: *PROXIES_GROUP_MORE
  - name: â“‚ï¸ å¾®è½¯æœåŠ¡ # é»˜è®¤ï¼šğŸŒ å¿«é€Ÿé€‰æ‹©ä»£ç†
    <<: *PROXIES_GROUP_MORE
  - name: ğŸ® æ¸¸æˆæœåŠ¡ # é»˜è®¤ï¼šğŸŒ å¿«é€Ÿé€‰æ‹©ä»£ç†
    <<: *PROXIES_GROUP_MORE
  - name: ğŸ¥ æµåª’ä½“ # é»˜è®¤ï¼šğŸŒ å¿«é€Ÿé€‰æ‹©ä»£ç†
    <<: *PROXIES_GROUP_MORE
  - name: ğŸ“² ç”µæŠ¥æ¶ˆæ¯ # é»˜è®¤ï¼šğŸŒ å¿«é€Ÿé€‰æ‹©ä»£ç†
    <<: *PROXIES_GROUP_MORE
  - name: ğŸ”° iCloud # é»˜è®¤ï¼šğŸŒ å¿«é€Ÿé€‰æ‹©ä»£ç†
    <<: *PROXIES_GROUP_MORE
  - name: ğŸ”° BING # é»˜è®¤ï¼šğŸŒ å¿«é€Ÿé€‰æ‹©ä»£ç†
    <<: *PROXIES_GROUP_MORE
  - name: ğŸ”° å¹¿å‘Š # é»˜è®¤ï¼šREJECT
    <<: *PROXIES_GROUP_MORE_REJECT
  - name: ğŸ”° å›½å†…ç½‘ç«™ # é»˜è®¤ï¼šDIRECT
    <<: *PROXIES_GROUP_MORE_DIRECT
  - name: ğŸ”’ ç§æœ‰ç½‘ç»œ # é»˜è®¤ï¼šDIRECT
    <<: *PROXIES_GROUP_MORE_DIRECT
  - name: ğŸŒ è§„åˆ™ä¹‹å¤– # é»˜è®¤ï¼šğŸŒ å¿«é€Ÿé€‰æ‹©ä»£ç†
    <<: *PROXIES_GROUP_MORE
  # å›½å®¶/åœ°åŒºåˆ†ç»„(åšæŒä¸€ä¸ªä¸­å›½åŸåˆ™ï¼Œå°æ¹¾å±äºåœ°åŒº)
  - name: ğŸ‡ºğŸ‡² é€‰æ‹©ç¾å›½èŠ‚ç‚¹
    <<: *URLTEST_DEFAULTS
    filter: "(?i)ç¾å›½|US|USA|United States|America"
  - name: ğŸ‡¯ğŸ‡µ é€‰æ‹©æ—¥æœ¬èŠ‚ç‚¹
    <<: *URLTEST_DEFAULTS
    filter: "(?i)æ—¥æœ¬|JP|Japan|Tokyo"
  - name: ğŸ‡­ğŸ‡° é€‰æ‹©é¦™æ¸¯èŠ‚ç‚¹
    <<: *URLTEST_DEFAULTS
    filter: "(?i)é¦™æ¸¯|HK|Hong Kong"
  - name: ğŸ‡­ğŸ‡° é€‰æ‹©å°æ¹¾èŠ‚ç‚¹
    <<: *URLTEST_DEFAULTS
    filter: "(?i)å°æ¹¾|TW|Taiwan"
  - name: ğŸ˜Š é€‰æ‹©å…¶ä»–å›½å®¶èŠ‚ç‚¹
    <<: *FALLBACK_DEFAULTS
    exclude-filter: "(?i)ç¾å›½|US|USA|United States|America|æ—¥æœ¬|JP|Japan|Tokyo|é¦™æ¸¯|HK|Hong Kong|å°æ¹¾|TW|Taiwan"
rule-providers-default:
  http: &HTTP_DEFAULTS
    type: http
    behavior: domain
    interval: 86400
rule-providers:
  reject:
    <<: *HTTP_DEFAULTS
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt
    path: ./ruleset/reject.yaml
  icloud:
    <<: *HTTP_DEFAULTS
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt
    path: ./ruleset/icloud.yaml
  apple:
    <<: *HTTP_DEFAULTS
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt
    path: ./ruleset/apple.yaml
  google:
    <<: *HTTP_DEFAULTS
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt
    path: ./ruleset/google.yaml
  proxy:
    <<: *HTTP_DEFAULTS
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt
    path: ./ruleset/proxy.yaml
  direct:
    <<: *HTTP_DEFAULTS
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt
    path: ./ruleset/direct.yaml
  private:
    <<: *HTTP_DEFAULTS
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt
    path: ./ruleset/private.yaml
  gfw:
    <<: *HTTP_DEFAULTS
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt
    path: ./ruleset/gfw.yaml
  tld-not-cn:
    <<: *HTTP_DEFAULTS
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt
    path: ./ruleset/tld-not-cn.yaml
  telegramcidr:
    <<: *HTTP_DEFAULTS
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt
    path: ./ruleset/telegramcidr.yaml
  cncidr:
    <<: *HTTP_DEFAULTS
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt
    path: ./ruleset/cncidr.yaml
  lancidr:
    <<: *HTTP_DEFAULTS
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt
    path: ./ruleset/lancidr.yaml
  applications:
    <<: *HTTP_DEFAULTS
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt
    path: ./ruleset/applications.yaml
  bing:
    <<: *HTTP_DEFAULTS
    url: https://rules.xkww3n.cyou/yaml/bing.yaml
    path: ./ruleset/bing.yaml
  mnban:
    <<: *HTTP_DEFAULTS
    url: https://raw.githubusercontent.com/LIghtJUNction/MagicMihomo/main/ruleset/magicnet/ban.yaml
    path: ./ruleset/magicnet/ban.yaml
  mndirect:
    <<: *HTTP_DEFAULTS
    url: https://raw.githubusercontent.com/LIghtJUNction/MagicMihomo/main/ruleset/magicnet/direct.yaml
    path: ./ruleset/magicnet/direct.yaml
rules:
  # 1) ã€æé«˜ä¼˜å…ˆçº§ã€‘æœ¬åœ°/ç‰¹æ®Š IP æ‹¦æˆªä¸ç¯å›
  - IP-CIDR,127.0.0.1/32,REJECT,no-resolve
  - IP-CIDR6,::1/128,REJECT,no-resolve
  - IP-CIDR,198.18.0.0/16,REJECT,no-resolve # æ‹¦æˆª Fake-IP ç¯å›
  - IP-CIDR,28.0.0.0/8,REJECT,no-resolve
  # 2) ã€æ‹¦æˆªç±»ã€‘å¹¿å‘Šã€è¿½è¸ªå™¨ä¸æ¶æ„è¡Œä¸º (GEOSITE + RULE-SET)
  - GEOSITE,ads,ğŸ”° å¹¿å‘Š
  - RULE-SET,mnban,REJECT
  - RULE-SET,reject,ğŸ”° å¹¿å‘Š
  - RULE-SET,trackerslist,ğŸ”° å¹¿å‘Š
  - DOMAIN-SUFFIX,o33249.ingest.sentry.io,REJECT
  - DOMAIN-SUFFIX,openaicom.imgix.net,REJECT
  # 3) ã€å±€åŸŸç½‘/ç§æœ‰ã€‘IPv4 & IPv6 æ‹¥æŠ± (æ— æ„Ÿäº’è®¿)
  - RULE-SET,private,DIRECT
  - GEOSITE,private,DIRECT
  - RULE-SET,lancidr,DIRECT,no-resolve
  - IP-CIDR,10.0.0.0/8,DIRECT,no-resolve
  - IP-CIDR,172.16.0.0/12,DIRECT,no-resolve
  - IP-CIDR,192.168.0.0/16,DIRECT,no-resolve
  - IP-CIDR6,fe80::/10,DIRECT,no-resolve # IPv6 é“¾è·¯æœ¬åœ°
  - IP-CIDR6,fc00::/7,DIRECT,no-resolve # IPv6 å”¯ä¸€æœ¬åœ°
  # 4) ã€ç½‘ç»œè¿é€šæ€§æµ‹è¯•ã€‘é˜²æ­¢ç³»ç»Ÿè¯¯æŠ¥æ–­ç½‘
  - GEOSITE,networktest,ğŸ“ˆ ç½‘ç»œæµ‹è¯•
  # 5) ã€ç‰¹å®šç«¯å£/åè®®ã€‘åŠ é€Ÿ (NTP / æ¨é€)
  - AND,((NETWORK,UDP),(DST-PORT,123)),DIRECT
  - AND,((NETWORK,TCP),(DST-PORT,5228-5230)),DIRECT # Google Push
  - AND,((NETWORK,UDP),(DST-PORT,135-139)),DIRECT # NetBIOS
  # 6) ã€å›½å†…åŠ é€Ÿ - æ ¸å¿ƒå¤§å‚ã€‘(GEOSITE + RULE-SET)
  - GEOSITE,apple-cn,ğŸ è‹¹æœæœåŠ¡
  - RULE-SET,apple,ğŸ è‹¹æœæœåŠ¡
  - RULE-SET,icloud,ğŸ”° iCloud
  - GEOSITE,microsoft-cn,â“‚ï¸ å¾®è½¯æœåŠ¡
  - GEOSITE,google-cn,ğŸ”° å›½å†…ç½‘ç«™ # è§£å†³å›½å†… Google ç¿»è¯‘/åœ°å›¾
  - GEOSITE,games-cn,ğŸ® æ¸¸æˆæœåŠ¡ # å›½å†…æ¸¸æˆç›´è¿åŠ é€Ÿ
  # 7) ã€äººå·¥æ™ºèƒ½ã€‘AI ä¼˜å…ˆç­–ç•¥
  - GEOSITE,ai,ğŸ¤– äººå·¥æ™ºèƒ½
  - RULE-SET,bing,ğŸ¤– äººå·¥æ™ºèƒ½
  # 8) ã€ç¯å¤§é™†åˆ†æµã€‘(TLD-Proxy / GFW / Proxy)
  - GEOSITE,tld-proxy,ğŸ”° ç¯å¤§é™† # éä¸­å›½é¡¶çº§åŸŸååŠ é€Ÿ
  - GEOSITE,gfw,ğŸ”° ç¯å¤§é™†
  - GEOSITE,proxy,ğŸ”° ç¯å¤§é™†
  - RULE-SET,proxy,ğŸ”° ç¯å¤§é™†
  - RULE-SET,gfw,ğŸ”° ç¯å¤§é™†
  - RULE-SET,google,ğŸ”° ç¯å¤§é™†
  - RULE-SET,telegramcidr,ğŸ“² ç”µæŠ¥æ¶ˆæ¯,no-resolve
  # 9) ã€å…¨çƒåª’ä½“ä¸æ¸¸æˆã€‘
  - GEOSITE,media,ğŸ¥ æµåª’ä½“
  - GEOSITE,games,ğŸ® æ¸¸æˆæœåŠ¡
  # 10) ã€å›½å†…å…œåº•ã€‘(CN)
  - RULE-SET,mndirect,DIRECT
  - GEOSITE,cn,ğŸ”° å›½å†…ç½‘ç«™
  - RULE-SET,direct,ğŸ”° å›½å†…ç½‘ç«™
  - RULE-SET,applications,ğŸ”° å›½å†…ç½‘ç«™
  - RULE-SET,cncidr,ğŸ”° å›½å†…ç½‘ç«™,no-resolve # å…³é”®ï¼šåˆ¤æ–­ IP åœ¨å›½å†…åˆ™ç›´è¿ï¼Œno-resolve é˜²æ­¢æ³„æ¼
  # 11) ã€æœ€ç»ˆå…œåº•ã€‘
  - MATCH,ğŸŒ è§„åˆ™ä¹‹å¤–
port: 7890
socks-port: 7891
mixed-port: 7892
redir-port: 9797
tproxy-port: 9898
external-controller: 127.0.0.1:9090
# secret: "ä½ çš„å¼ºå¯†ç "  # ç™»å½• UI é¢æ¿æ—¶ä¼šè¦æ±‚è¾“å…¥æ­¤å¯†ç 
external-ui: ./ui
external-ui-name: cubex
external-ui-url: https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip
ipv6: true
allow-lan: true
tcp-concurrent: true
unified-delay: true
geodata-mode: true
geo-auto-update: true
geo-update-interval: 24
keep-alive-interval: 1800
mode: rule
log-level: error
global-client-fingerprint: random
geodata-loader: standard
find-process-mode: strict
bind-address: "*"
hosts:
  time.facebook.com: 17.253.84.125
  time.android.com: 17.253.84.125
  "*.mihomo.dev": 127.0.0.1
  .dev: 127.0.0.1
  alpha.mihomo.dev: ::1
  test.com:
    - 1.1.1.1
    - 2.2.2.2
  home.lan: lan
